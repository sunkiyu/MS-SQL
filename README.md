# MS-SQL

## 클러스터의 종류
* 클러스터 인덱스
* 넌클러스터 인덱스

* 클러스터 인덱스
=> 테이블 당 1개만 허용   
=> 물리적 행 재배열   
=> 기본키 설정 시 그 컬럼은 자동으로 클러스터 인덱스가 만들어진다.   
=> 리프 페이지 = 데이터, 테이블 자체가 인덱스임(인덱스 페이지 용량이 작다)   
=> 리프레벨(Leaf Level) 인덱스 테이블이 필요 X, 인덱스 테이블이 따로 필요하지 않기에 용량이 필요 X   
=> 데이터 입력, 수정, 삭제 시 항상 정렬 상태 유지   
=> 넌클러스터 인덱스보다 검색 속도는 빠르지만 입력, 수정, 삭제 속도는 느리다.   
=> 30% 이내에서 사용해야 좋은 선택도를 가짐.

* 넌클러스터 인덱스
=> 테이블 당 약 240개의 인덱스를 만들 수 있다.   
=> 인덱스 페이지는 로그파일에 저장됨.   
=> 레코드 원본은 정렬되지 않고 인덱스 페이지만 정렬   
=> 리프 페이지 != 데이터, 데이터가 위치하는 포인터
=> 인덱스 자체의 리프 페이지는 데이터가 아니라 데이터가 위치하는 포인터(RID)이기 때문에 클러스터형보다 검색 속도는 더 느리지만 데이터의 입력, 수정, 삭제는 더 빠름   
=> 인덱스를 생성할 때 데이터 페이지는 그냥 둔 상태에서 별도의 인덱스 페이지를 따로 만들기 때문에 용량을 더 차지(인덱스 페이지 용량이 크다.)
=> 3% 이내에서 사용해야 좋은 선택도를 가짐.

[클러스터 넌클러스터 인덱스 이해도](https://mozi.tistory.com/320)
***
## PrimaryKey 와 Unique Key의 차이
* 일반적으로 PrimaryKey 가 UniqueKey에 속해있다고 본다.   
* 두 Key의 공통점은 유일성 보장과 중복값을 허용하지 않는다.    
* 둘의 가장 큰 차이점은 PrimaryKey는 NULL값을 허용하지 않고 UniqueKey는 NULL 값을 허용   
***
# Join

## Inner Join
* 기준 테이블과 조인 테이블에 조이 컬럼에 해당하는 값이 모두 존재하는 경우의 데이터가 조회

## Outer Join(Left,Right Outer Join)
* Outer Join에서 LEFT, RIGHT는 기준 테이블을 지칭한다.   
* 기준 테이블의 데이터는 모두 조회되고 나머지는 조인 테이블에 값이 있는 것이 조회된다.   
* 대부분 Left Outer Join을 사용한다.   
* Outer Join을 사용하는 이유는 기준 테이블의 데이터를 누락 없이 조회하고 참조 테이블의 값이 있는 경우 해당 값을 사용하기 위함이다.   

## Full Outer Join
* 두 테이블을 합쳐서 조회한다.   

## Cross Join
* 크로스 조인은 기준 테이블의 행을 조인 테이블 행만큼 증가 시킴.   
***

 
