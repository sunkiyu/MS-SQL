# MS-SQL

## 클러스터의 종류
* 클러스터 인덱스
* 넌클러스터 인덱스

* 클러스터 인덱스
=> 테이블 당 1개만 허용   
=> 물리적 행 재배열   
=> 기본키 설정 시 그 컬럼은 자동으로 클러스터 인덱스가 만들어진다.   
=> 리프 페이지 = 데이터, 테이블 자체가 인덱스임(인덱스 페이지 용량이 작다)   
=> 리프레벨(Leaf Level) 인덱스 테이블이 필요 X, 인덱스 테이블이 따로 필요하지 않기에 용량이 필요 X   
=> 데이터 입력, 수정, 삭제 시 항상 정렬 상태 유지   
=> 넌클러스터 인덱스보다 검색 속도는 빠르지만 입력, 수정, 삭제 속도는 느리다.   
=> 30% 이내에서 사용해야 좋은 선택도를 가짐.

* 넌클러스터 인덱스
=> 테이블 당 약 240개의 인덱스를 만들 수 있다.   
=> 인덱스 페이지는 로그파일에 저장됨.   
=> 레코드 원본은 정렬되지 않고 인덱스 페이지만 정렬   
=> 리프 페이지 != 데이터, 데이터가 위치하는 포인터
=> 인덱스 자체의 리프 페이지는 데이터가 아니라 데이터가 위치하는 포인터(RID)이기 때문에 클러스터형보다 검색 속도는 더 느리지만 데이터의 입력, 수정, 삭제는 더 빠름   
=> 인덱스를 생성할 때 데이터 페이지는 그냥 둔 상태에서 별도의 인덱스 페이지를 따로 만들기 때문에 용량을 더 차지(인덱스 페이지 용량이 크다.)
=> 3% 이내에서 사용해야 좋은 선택도를 가짐.

[클러스터 넌클러스터 인덱스 이해도](https://mozi.tistory.com/320)
